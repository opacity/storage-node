basePath: '{{.BasePath}}'
definitions:
  models.Invoice:
    properties:
      cost:
        example: 1.56
        type: number
      ethAddress:
        example: a 42-char eth address with 0x prefix
        maxLength: 42
        minLength: 42
        type: string
    required:
    - cost
    - ethAddress
    type: object
  routes.InitFileUploadObj:
    properties:
      endIndex:
        example: 2
        type: integer
      fileHandle:
        example: a deterministically created file handle
        maxLength: 64
        minLength: 64
        type: string
      fileSizeInByte:
        example: 200000000000006
        type: integer
    required:
    - endIndex
    - fileHandle
    - fileSizeInByte
    type: object
  routes.InitFileUploadReq:
    properties:
      initFileUploadObj:
        $ref: '#/definitions/routes.InitFileUploadObj'
        type: object
      metadata:
        example: the metadata of the file you are about to upload, as an array of
          bytes
        type: string
      metadataAsFile:
        type: string
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: look at description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - metadata
    - publicKey
    - requestBody
    - signature
    type: object
  routes.StatusRes:
    properties:
      status:
        example: status of the request
        type: string
    type: object
  routes.UploadFileReq:
    properties:
      chunkData:
        example: a binary string of the chunk data
        type: string
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: should produce routes.UploadFileObj, see description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - chunkData
    - publicKey
    - requestBody
    - signature
    type: object
  routes.UploadStatusReq:
    properties:
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: should produce routes.UploadStatusObj, see description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.accountCreateObj:
    properties:
      durationInMonths:
        example: 12
        minimum: 1
        type: integer
      storageLimit:
        example: 100
        maximum: 100
        minimum: 100
        type: integer
    required:
    - durationInMonths
    - storageLimit
    type: object
  routes.accountCreateReq:
    properties:
      accountCreateObj:
        $ref: '#/definitions/routes.accountCreateObj'
        type: object
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: look at description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.accountCreateRes:
    properties:
      expirationDate:
        type: string
      invoice:
        $ref: '#/definitions/models.Invoice'
        type: object
    required:
    - expirationDate
    type: object
  routes.accountDataRes:
    properties:
      account:
        $ref: '#/definitions/routes.accountGetObj'
        type: object
      paymentStatus:
        example: paid
        type: string
    type: object
  routes.accountGetObj:
    properties:
      apiVersion:
        type: integer
      cost:
        example: 2
        type: number
      createdAt:
        type: string
      ethAddress:
        description: the eth address they will send payment to
        example: a 42-char eth address with 0x prefix
        maxLength: 42
        minLength: 42
        type: string
      expirationDate:
        type: string
      maxFolders:
        example: 2000
        type: integer
      maxMetadataSizeInMB:
        example: 200
        type: integer
      monthsInSubscription:
        description: number of months in their subscription
        example: 12
        type: integer
      storageLimit:
        description: how much storage they are allowed, in GB
        example: 100
        type: integer
      storageUsed:
        description: how much storage they have used, in GB
        example: 30
        type: number
      totalFolders:
        example: 2
        type: integer
      totalMetadataSizeInMB:
        example: 245765432
        type: integer
      updatedAt:
        type: string
    required:
    - apiVersion
    - cost
    - ethAddress
    - expirationDate
    - monthsInSubscription
    - storageLimit
    type: object
  routes.accountGetReqObj:
    properties:
      timestamp:
        type: integer
    required:
    - timestamp
    type: object
  routes.createMetadataRes:
    properties:
      expirationDate:
        type: string
    required:
    - expirationDate
    type: object
  routes.deleteFileObj:
    properties:
      fileID:
        example: the handle of the file
        type: string
    required:
    - fileID
    type: object
  routes.deleteFileReq:
    properties:
      deleteFileObj:
        $ref: '#/definitions/routes.deleteFileObj'
        type: object
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: look at description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.deleteFileRes:
    type: object
  routes.downloadFileObj:
    properties:
      fileID:
        example: the handle of the file
        type: string
    required:
    - fileID
    type: object
  routes.downloadFileRes:
    properties:
      fileDownloadUrl:
        description: Url should point to S3, thus client does not need to download
          it from this node.
        example: a URL to use to download the file
        type: string
    type: object
  routes.getAccountDataReq:
    properties:
      accountGetReqObj:
        $ref: '#/definitions/routes.accountGetReqObj'
        type: object
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: look at description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.getMetadataRes:
    properties:
      expirationDate:
        type: string
      metadata:
        example: your account metadata
        type: string
    required:
    - expirationDate
    type: object
  routes.metadataKeyReq:
    properties:
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: should produce routes.metadataKeyObject, see description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.updateMetadataReq:
    properties:
      publicKey:
        example: a 66-character public key
        maxLength: 66
        minLength: 66
        type: string
      requestBody:
        example: should produce routes.updateMetadataObject, see description for example
        type: string
      signature:
        description: |-
          signature without 0x prefix is broken into
          R: sig[0:63]
          S: sig[64:127]
        example: a 128 character string created when you signed the request with your
          private key or account handle
        maxLength: 128
        minLength: 128
        type: string
    required:
    - publicKey
    - requestBody
    - signature
    type: object
  routes.updateMetadataRes:
    properties:
      expirationDate:
        type: string
      metadata:
        example: your (updated) account metadata
        type: string
      metadataKey:
        example: a 64-char hex string created deterministically, will be a key for
          the metadata of one of your folders
        type: string
    required:
    - expirationDate
    - metadata
    - metadataKey
    type: object
host: '{{.Host}}'
info:
  contact: {}
  description: '{{.Description}}'
  license: {}
  title: '{{.Title}}'
  version: '{{.Version}}'
paths:
  /api/v1/account-data:
    post:
      consumes:
      - application/json
      description: |-
        check the payment status of an account
        requestBody should be a stringified version of (values are just examples):
        {
        "timestamp": 1557346389
        }
      parameters:
      - description: account payment status check object
        in: body
        name: getAccountDataReq
        required: true
        schema:
          $ref: '#/definitions/routes.getAccountDataReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.accountDataRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "404":
          description: 'no account with that id: (with your accountID)'
          schema:
            type: string
      summary: check the payment status of an account
  /api/v1/accounts:
    post:
      consumes:
      - application/json
      description: |-
        create an account
        requestBody should be a stringified version of (values are just examples):
        {
        "storageLimit": 100,
        "durationInMonths": 12,
        }
      parameters:
      - description: account creation object
        in: body
        name: accountCreateReq
        required: true
        schema:
          $ref: '#/definitions/routes.accountCreateReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.accountCreateRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "503":
          description: 'error encrypting private key: (with the error)'
          schema:
            type: string
      summary: create an account
  /api/v1/delete:
    post:
      consumes:
      - application/json
      description: |-
        delete a file
        requestBody should be a stringified version of (values are just examples):
        {
        "fileID": "the handle of the file",
        }
      parameters:
      - description: file deletion object
        in: body
        name: deleteFileReq
        required: true
        schema:
          $ref: '#/definitions/routes.deleteFileReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.deleteFileRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: delete a file
  /api/v1/download:
    post:
      consumes:
      - application/json
      description: download a file without cryptographic verification
      parameters:
      - description: download object for non-signed requests
        in: body
        name: downloadFileObj
        required: true
        schema:
          $ref: '#/definitions/routes.downloadFileObj'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.downloadFileRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "404":
          description: such data does not exist
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: download a file without cryptographic verification
  /api/v1/init-upload:
    post:
      consumes:
      - multipart/form-data
      description: |-
        start an upload
        requestBody should be a stringified version of (values are just examples):
        {
        "fileHandle": "a deterministically created file handle",
        "fileSizeInByte": "200000000000006",
        "endIndex": 2
        }
      parameters:
      - description: an object to start a file upload
        in: body
        name: InitFileUploadReq
        required: true
        schema:
          $ref: '#/definitions/routes.InitFileUploadReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.StatusRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: signature did not match
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: start an upload
  /api/v1/metadata/create:
    post:
      consumes:
      - application/json
      description: |-
        requestBody should be a stringified version of (values are just examples):
        {
        "metadataKey": "a 64-char hex string created deterministically, will be a key for the metadata of one of your folders",
        "timestamp": 1557346389
        }
      parameters:
      - description: object for endpoints that only need metadataKey and timestamp
        in: body
        name: metadataKeyReq
        required: true
        schema:
          $ref: '#/definitions/routes.metadataKeyReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.createMetadataRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: subscription expired, or the invoice resonse
          schema:
            type: string
        "404":
          description: account not found
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: create a new metadata
  /api/v1/metadata/delete:
    post:
      consumes:
      - application/json
      description: |-
        requestBody should be a stringified version of (values are just examples):
        {
        "metadataKey": "a 64-char hex string created deterministically, will be a key for the metadata of one of your folders",
        "timestamp": 1557346389
        }
      parameters:
      - description: object for endpoints that only need metadataKey and timestamp
        in: body
        name: metadataKeyReq
        required: true
        schema:
          $ref: '#/definitions/routes.metadataKeyReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.StatusRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: subscription expired, or the invoice resonse
          schema:
            type: string
        "404":
          description: account not found
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: delete a metadata
  /api/v1/metadata/get:
    post:
      consumes:
      - application/json
      description: |-
        requestBody should be a stringified version of (values are just examples):
        {
        "metadataKey": "a 64-char hex string created deterministically, will be a key for the metadata of one of your folders",
        "timestamp": 1557346389
        }
      parameters:
      - description: object for endpoints that only need metadataKey and timestamp
        in: body
        name: metadataKeyReq
        required: true
        schema:
          $ref: '#/definitions/routes.metadataKeyReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.getMetadataRes'
            type: object
        "403":
          description: subscription expired, or the invoice resonse
          schema:
            type: string
        "404":
          description: no value found for that key, or account not found
          schema:
            type: string
      summary: Retrieve account metadata
  /api/v1/metadata/set:
    post:
      consumes:
      - application/json
      description: |-
        requestBody should be a stringified version of (values are just examples):
        {
        "metadataKey": "a 64-char hex string created deterministically, will be a key for the metadata of one of your folders",
        "metadata": "your (updated) account metadata",
        "timestamp": 1557346389
        }
      parameters:
      - description: update metadata object
        in: body
        name: updateMetadataReq
        required: true
        schema:
          $ref: '#/definitions/routes.updateMetadataReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.updateMetadataRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: subscription expired, or the invoice resonse
          schema:
            type: string
        "404":
          description: no value found for that key, or account not found
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: Update metadata
  /api/v1/upload:
    post:
      consumes:
      - multipart/form-data
      description: |-
        upload a chunk of a file. The first partIndex must be 1.
        requestBody should be a stringified version of (values are just examples):
        {
        "fileHandle": "a deterministically created file handle",
        "partIndex": 1,
        }
      parameters:
      - description: an object to upload a chunk of a file
        in: body
        name: UploadFileReq
        required: true
        schema:
          $ref: '#/definitions/routes.UploadFileReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.StatusRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/routes.accountCreateRes'
            type: object
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: upload a chunk of a file
  /api/v1/upload-status:
    post:
      consumes:
      - application/json
      description: |-
        check status of an upload
        requestBody should be a stringified version of (values are just examples):
        {
        "fileHandle": "a deterministically created file handle",
        }
      parameters:
      - description: an object to poll upload status
        in: body
        name: UploadStatusReq
        required: true
        schema:
          $ref: '#/definitions/routes.UploadStatusReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.StatusRes'
            type: object
        "400":
          description: 'bad request, unable to parse request body: (with the error)'
          schema:
            type: string
        "403":
          description: signature did not match
          schema:
            type: string
        "404":
          description: file or account not found
          schema:
            type: string
        "500":
          description: some information about the internal error
          schema:
            type: string
      summary: check status of an upload
  /plans:
    get:
      consumes:
      - application/json
      description: get the plans we sell
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Env.Plans'
            type: object
      summary: get the plans we sell
swagger: "2.0"
